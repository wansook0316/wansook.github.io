<!DOCTYPE html>
<html class="no-js">
  <head>
	<meta charset="utf-8">
	<title>09: í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” Part 2 | ì™„ìˆ™ì˜ ì—ê·¸ë¨¸ë‹ˆğŸ³</title>
	<meta name="description"
		content="í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” ë„êµ¬ì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤.">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- CSS -->
	<link rel="stylesheet" href="/assets/css/main.css">

	<!--Favicon-->
	<link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

	<!-- Canonical -->
	<link rel="canonical" href="/cs/os/2020/04/01/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-09-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EB%8F%99%EA%B8%B0%ED%99%94-2.html">

	<!-- RSS -->
	<link rel="alternate" type="application/atom+xml" title="ì™„ìˆ™ì˜ ì—ê·¸ë¨¸ë‹ˆğŸ³"
		href="/feed.xml" />

	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
		integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">

	<!-- Google Fonts -->
	
	<link href="//fonts.googleapis.com/css?family=Nanum+Gothic|Jua|Nanum+Gothic+Coding|Source+Code+Pro|Nanum+Myeongjo:400|Noto+Sans+KR:100,300" rel="stylesheet"
		type="text/css">
	

	<!-- naver web mater tool -->
	<meta name="naver-site-verification" content="da86adfc2aa8cdd5f1d573b50497f3e29de44cd5" />

	<!-- KaTeX -->
    <!--
	
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css"
		integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">

	<script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js"
		integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ"
		crossorigin="anonymous"></script>
	

    -->
	<!-- Google Analytics -->
	
	<script>
		(function (i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date(); a = s.createElement(o),
			m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
		})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

		ga('create', 'UA-156961472-1', 'auto');
		ga('send', 'pageview');
	</script>
	
  
  <!-- Latex -->
<!--
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
-->
  
    
        <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    TeX: {
      equationNumbers: {
        autoNumber: "AMS"
      }
    },
    tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$'] ],
    processEscapes: true,
  }
});
MathJax.Hub.Register.MessageHook("Math Processing Error",function (message) {
	  alert("Math Processing Error: "+message[1]);
	});
MathJax.Hub.Register.MessageHook("TeX Jax - parse error",function (message) {
	  alert("Math Processing Error: "+message[1]);
	});
</script>

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
    
	<script>
console.log(window)

window.addEventListener("resize", changeContent);
window.addEventListener("load", changeContent);

function changeContent(event){
  const width = window.innerWidth;
  console.log(event);
  const cat = document.getElementById("js-cat");
  const cv = document.getElementById("category-cv");
  const math = document.getElementById("category-math");
  const ds = document.getElementById("category-ds");
  const cs = document.getElementById("category-cs");
  const dv = document.getElementById("category-dv");
  const about = document.getElementById("category-about");
  if (width < 710) {
    cv.innerText = "ğŸ“œ"
    math.innerText = "âœ–"
    ds.innerText = "ğŸ“ˆ"
    cs.innerText = "ğŸ’¾"
    dv.innerText = "ğŸ“±"
    about.innerText = "ğŸ˜"
    cat.style.justifyContent = "space-around"
  } else {
    cv.innerText = "CV"
    math.innerText = "Math"
    ds.innerText = "Data Science"
    cs.innerText = "Computer Science"
    dv.innerText = "Development"
    about.innerText = "About"
    cat.style.justifyContent = "center"
  }
  
}

</script>

	
	<script>
  function handleNavShowing() {
    var side_nav = document.getElementById("js-side_nav");
    var side_nav_button_title = document.getElementById("js-btn-content");

    if (side_nav.style.display == "block") {
        side_nav.style.display = "none";
        side_nav_button_title.innerHTML = "â–¼ ëª©ë¡ ë³´ê¸°";
    } else {
        side_nav.style.display = "block";
        side_nav_button_title.innerHTML = "â–² ìˆ¨ê¸°ê¸°";
    }
  }
</script>

	 
</head>
  <body>
    <header class="site-header">
    <div class="site-title-nav">
        <div class="branding">
            
            <a href="/">
                <img class="avatar" src="/assets/img/avatar.png" alt=""/>
            </a>
            
            <h1 class="site-title">
                <a href="/">ì™„ìˆ™ì˜ ì—ê·¸ë¨¸ë‹ˆğŸ³</a>
            </h1>
        </div>
    </div>
    <nav class="site-nav">
            <ul>
<!--
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li>
                    <a class="page-link" href="/about/">
                        About Me
                    </a>
                </li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
-->
                <!-- Social icons from Font Awesome, if enabled  -->
<!--                


<li>
	<a href="mailto:wansook0316@gmail.com" title="Email">
		<i class="fas fa-fw fa-envelope"></i>
	</a>
</li>













<li>
	<a href="https://github.com/wansook0316" title="Follow on GitHub">
		<i class="fab fa-fw fa-github"></i>
	</a>
</li>





























-->

                <!-- Search bar -->
                <li>
                


<li>
	<a href="mailto:wansook0316@gmail.com" title="Email">
		<i class="fas fa-fw fa-envelope"></i>
	</a>
</li>













<li>
	<a href="https://github.com/wansook0316" title="Follow on GitHub">
		<i class="fab fa-fw fa-github"></i>
	</a>
</li>






























                </li>
                
                <li>
                <form action="/search.html" method="get">
                    <input type="text" id="search-box" name="query" placeholder="Search" class="">
                    <button type="submit" class="">
                        <i class="fa fa-fw fa-search"></i>
                    </button>
                </form>
                </li>
                
                
            </ul>
        </nav>
  
  
  
  
  

</header>

<div class="site-category">
    <ul class='cat1' id="js-cat">

      
      <li><a id="category-cv"href="/"> </a>
        <ul>
            <li><a href="/CV/Projects">Projects</a></li>
            <li><a href="/CV/Awards">Awards</a></li>
            <li><a href="/CV/Papers">Papers</a></li>
            <li><a href="/CV/ExtraCurricular Act">ExtraCurricular Act</a></li>
            <li><a href="/CV/InternShip">InternShip</a></li>
            <li><a href="/CV/Language">Language</a></li>
            <li><a href="/CV/Education">Education</a></li>
            <li><a href="/CV/Cources">Cources</a></li>
        </ul>
      </li>
      
      <li><a id="category-math"href="/"> </a>
        <ul>
            <li><a href="/Math/Mathematical Statistics">Statistics</a></li>
            <li><a href="/Math/Linear Algebra">Linear Algebra</a></li>
            <li><a href="/Math/Calculus">Calculus</a></li>
        </ul>
      </li>

      <li><a id="category-ds" href="/"> </a>
        <ul>
          <li><a href="/DS/R">R</a></li>
          <li><a href="/DS/ESL">ESL</a></li>
          <li><a href="/DS/ML">Machine Learning</a></li>
          <li><a href="/DS/Visualization">Visualization</a></li>
        </ul>
      </li>
      
      <li><a id = "category-cs" href="/"> </a>
        <ul>
          <li><a href="/CS/Network">Network</a></li>
          <li><a href="/CS/Database">Database</a></li>
          <li><a href="/CS/Algorithm">Algorithm</a></li>
          <li><a href="/CS/Structure">Structure</a></li>
          <li><a href="/CS/Parallel">Parallel</a></li>
          <li><a href="/CS/OS">OS</a></li>
        </ul>
      </li>


      <li><a id="category-dv" href="/"> </a>
        <ul>
          <li><a href="/DV/Ubuntu">Ubuntu</a></li>
          <li><a href="/DV/Python">Python</a></li>
          <li><a href="/DV/C++">C++</a></li>
          <li><a href="/DV/HTML">HTML</a></li>
          <li><a href="/DV/CSS">CSS</a></li>
          <li><a href="/DV/JavaScript">JavaScript</a></li>
          <li><a href="/DV/React">React</a></li>
          <li><a href="/DV/Django">Django</a></li>
          <li><a href="/DV/Git">Git</a></li>
          <li><a href="/DV/Tips">Tips</a></li>
          <li><a href="/DV/SP">Side Project</a></li>
        </ul>
      </li>

      
      <li><a id="category-about" href="/about/"> </a></li>
      
    
  
<!--    <ul class="cat2">-->
      
<!--  </ul>-->
    </ul>
  
  </div>

    <div class="content">
      <article class="feature-image">
  <header style="background-image: url('/assets/img/11.jpg')">
    <h1 class="title">09: ë™ê¸°í™” ë„êµ¬: Semaphore</h1>
    
    <p class="meta">
      CS/OS
      
        : ìš´ì˜ì²´ì œ ì •ë¦¬
      
    </p>

    <p class="meta">
      April 1, 2020
      
    </p>
  </header>



<section class="post-content">
  
    
    
    
    


<div class="series-nav">
    
      <p>
      ì´ í¬ìŠ¤íŒ…ì€ <b><em>ìš´ì˜ì²´ì œ ì •ë¦¬</em></b> ì‹œë¦¬ì¦ˆ <b><em>20</em></b> í¸ ì¤‘ <b><em>9</em></b> ë²ˆì§¸ ê¸€ ì…ë‹ˆë‹¤.
      </p>
      <ul class="side-nav" id="js-side_nav">

    
    
     
      
      
      
      
      
      
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/03/30/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-01-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80.html'">
                <span>Part 1 - 01: ìš´ì˜ì²´ì œë€ ë¬´ì—‡ì¸ê°€?</span>
            </li>
          
      
      
      
      
      
      
      
      
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/03/30/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-02-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EC%9D%98-%EC%97%AD%EC%82%AC.html'">
                <span>Part 2 - 02: ìš´ì˜ì²´ì œì˜ ì—­ì‚¬</span>
            </li>
          
      
      
      
      
      
      
      
      
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/03/30/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-03-%EC%9D%B4%EC%A4%91%EB%AA%A8%EB%93%9C%EC%99%80-%EB%B3%B4%ED%98%B8.html'">
                <span>Part 3 - 03: ì´ì¤‘ëª¨ë“œì™€ ë³´í˜¸</span>
            </li>
          
      
      
      
      
      
      
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/03/30/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-04-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%84%9C%EB%B9%84%EC%8A%A4.html'">
                <span>Part 4 - 04: ìš´ì˜ì²´ì œ ì„œë¹„ìŠ¤</span>
            </li>
          
      
      
      
      
      
      
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/01/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-05-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EA%B4%80%EB%A6%AC.html'">
                <span>Part 5 - 05: í”„ë¡œì„¸ìŠ¤ì™€ ê´€ë¦¬</span>
            </li>
          
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/01/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-06-CPU-%EC%8A%A4%EC%BC%80%EC%A5%B4%EB%A7%81.html'">
                <span>Part 6 - 06: CPU ìŠ¤ì¼€ì¥´ë§</span>
            </li>
          
      
      
      
      
      
      
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/01/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-07-%EC%93%B0%EB%A0%88%EB%93%9C.html'">
                <span>Part 7 - 07: ì“°ë ˆë“œ(Thread)</span>
            </li>
          
      
      
      
      
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/01/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-08-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EB%8F%99%EA%B8%B0%ED%99%94-1.html'">
                <span>Part 8 - 08: í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” Part 1</span>
            </li>
          
      
      
      
      
      
          
          
            <li class="current">
                <span>Part 9 - This Post</span>
            </li>
          
      
      
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/05/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-10-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EB%8F%99%EA%B8%B0%ED%99%94-3.html'">
                <span>Part 10 - 10: í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” Part 3</span>
            </li>
          
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/05/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-11-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EB%8F%99%EA%B8%B0%ED%99%94-4.html'">
                <span>Part 11 - 11: í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” Part 4</span>
            </li>
          
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/05/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-12-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EB%8F%99%EA%B8%B0%ED%99%94-5.html'">
                <span>Part 12 - 12: í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” Part 5</span>
            </li>
          
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/05/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-13-%EC%A3%BC%EA%B8%B0%EC%96%B5%EC%9E%A5%EC%B9%98-%EA%B4%80%EB%A6%AC.html'">
                <span>Part 13 - 13: ì£¼ê¸°ì–µ ì¥ì¹˜ ê´€ë¦¬</span>
            </li>
          
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/06/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-14-%ED%8E%98%EC%9D%B4%EC%A7%95.html'">
                <span>Part 14 - 14: í˜ì´ì§• (Paging)</span>
            </li>
          
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/06/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-15-%EC%84%B8%EA%B7%B8%EB%A9%98%ED%85%8C%EC%9D%B4%EC%85%98.html'">
                <span>Part 15 - 15: ì„¸ê·¸ë©˜í…Œì´ì…˜ (Segmentation)</span>
            </li>
          
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/06/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-16-%EA%B0%80%EC%83%81%EB%A9%94%EB%AA%A8%EB%A6%AC.html'">
                <span>Part 16 - 16: ê°€ìƒ ë©”ëª¨ë¦¬ (Virtual Memory)</span>
            </li>
          
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/06/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-17-%ED%8E%98%EC%9D%B4%EC%A7%80-%EA%B5%90%EC%B2%B4-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98.html'">
                <span>Part 17 - 17: í˜ì´ì§€ êµì²´ ì•Œê³ ë¦¬ì¦˜</span>
            </li>
          
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/06/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-18-%ED%94%84%EB%A0%88%EC%9E%84-%ED%95%A0%EB%8B%B9.html'">
                <span>Part 18 - 18: í”„ë ˆì„ í• ë‹¹ (Allocation of frame)</span>
            </li>
          
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/06/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-19-%ED%8C%8C%EC%9D%BC-%ED%95%A0%EB%8B%B9.html'">
                <span>Part 19 - 19: íŒŒì¼ í• ë‹¹ (Allocation of file)</span>
            </li>
          
      
      
      
          
          
            <li onclick="location.href='/cs/os/2020/04/06/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-20-%EB%94%94%EC%8A%A4%ED%81%AC-%EC%8A%A4%EC%BC%80%EC%A4%84%EB%A7%81-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98.html'">
                <span>Part 20 - 20: ë””ìŠ¤í¬ ìŠ¤ì¼€ì¥´ë§ ì•Œê³ ë¦¬ì¦˜</span>
            </li>
          
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
       
      </ul>
      <div class="side-nav-btn" id="js-btn-side_nav" onclick="handleNavShowing();">
        <div class="side-nav-btn__content" id="js-btn-content">â–¼ ëª©ë¡ ë³´ê¸°</div>
      </div>
  </div>



  <p>í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” ë„êµ¬ì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤.</p>

<h1 id="semaphoreì„¸ë§ˆí¬">Semaphore(ì„¸ë§ˆí¬)</h1>

<p><img width="801" alt="image" src="https://user-images.githubusercontent.com/37871541/78143768-a95c2d80-7469-11ea-81b6-5ff62292d1f0.png" class="center" />
Semaphoresms ê¹ƒë°œì´ë¼ëŠ” ë„¤ëœë€ë“œ ë‹¨ì–´ì´ë‹¤. ì˜›ë‚ ì—ëŠ” ê¸°ì°»ê¸¸ì—ì„œ ê³µìœ í•˜ëŠ” ê¸¸ì´ ìˆì„ ë•Œ, ê¹ƒë°œ í‘œì‹ìœ¼ë¡œ ì˜¤ê³ ê°ì˜ ì‹ í˜¸ë¥¼ ì£¼ê³  ë°›ì•˜ë‹¤. ì´ëŸ¬í•œ ë§¥ë½ì—ì„œ, Critical sectionì„ ì‚¬ìš©í•˜ëŠ” ì“°ë ˆë“œì— ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì˜ ì´ë¦„ìœ¼ë¡œ ë¶™ê²Œ ë˜ì—ˆë‹¤.</p>

<p>ìœ„ì˜ ê·¸ë¦¼ì„ ë³´ë©´ ê³µìœ í•˜ëŠ” ê¸°ì°»ê¸¸ì´ í•˜ë‚˜ì´ë‹¤. ì´ ê²½ìš° ê³µìœ  ìì›ì´ 1ì´ë¼ ë³¼ ìˆ˜ ìˆë‹¤. í•˜ë‚˜ì˜ ê¸°ì°¨ê°€ ì§€ë‚˜ê°ˆ ë•Œ 1ì„ ê°ì†Œì‹œí‚¤ê³ , ë‹¤ ì§€ë‚˜ê°„ ë’¤ì— 1ì„ ì¦ê°€ì‹œí‚¤ëŠ” ì¼ì„ ë°˜ë³µí•œë‹¤. ê·¸ë¦¬ê³  ë‹¤ë¥¸ ê¸°ì°¨ê°€ ì§€ë‚˜ê°€ë ¤ê³  í•  ë•Œ, Semaphoreê°€ 0ì¸ ê²½ìš°ì—ëŠ” ì •ì§€í•˜ê³  1ì¸ ê²½ìš°ì— ìˆœì°¨ì ìœ¼ë¡œ ì§€ë‚˜ê°€ê²Œ í•˜ë©´ í•´ê²°ëœë‹¤. ì´ë ‡ê²Œ Semaphoreê°€ 0, 1ì¸ ê²½ìš°ë¥¼ Binary Semaphoreë¼ í•œë‹¤.</p>

<p>ê³µìœ  ìì›ì´ ê¼­ 1ê°œì¼ í•„ìš”ëŠ” ì—†ë‹¤. ì—¬ëŸ¬ê°œì˜ ìì›ì¸ ìƒí™©ë„ ì¡´ì¬í•œë‹¤. ê°€ë ¹ ìœ„ì˜ ê¸°ì°¨ ê·¸ë¦¼ì—ì„œ í†µê³¼í•´ì„œ ê°ˆ ìˆ˜ ìˆëŠ” ê³µìœ  ê¸°ì°»ê¸¸ì´ 5ê°œë¼ë©´, ê³µìœ ìì›ì€ 5ì´ë‹¤. ì´ëŸ° ê²½ìš°ë¥¼ counting semaphoreë¼ í•œë‹¤.</p>

<h2 id="1-êµ¬í˜„">1. êµ¬í˜„</h2>

<p><img width="600" alt="image" src="https://user-images.githubusercontent.com/37871541/78479060-1cbeb180-7780-11ea-9d5b-6d9350b51d67.png" class="center" /></p>

<p>ìœ„ì˜ ì˜ˆì‹œì—ì„œ ë³´ë“¯, ê¹ƒë°œì€ ì´ ë‘ê°€ì§€ê°€ í•„ìš”í•˜ë‹¤. ì§€ë‚˜ê°€ëŠ” ê²½ìš°ì—ëŠ” ê°ì†Œ, ì§€ë‚˜ê°„ ë’¤ì—ëŠ” ì¦ê°€ì´ë‹¤. ì´ˆê¸°ì—ëŠ” P, Vë¡œ ë¶ˆë ¸ë‹¤.(ë„¤ëœë€ë“œì—ì„œ ë§Œë“¤ì–´ì ¸ ë„¤ëœë€ë“œì–´ì˜ ì•½ìì´ë‹¤.) í˜„ì¬ì—ëŠ” PëŠ” testë¥¼ ì˜ë¯¸í•˜ë©° <code class="language-plaintext highlighter-rouge">acquire()</code> ë¡œ ì‚¬ìš©í•˜ê³ , VëŠ” incrementë¥¼ ì˜ë¯¸í•˜ë©° <code class="language-plaintext highlighter-rouge">release()</code> ë¡œ ì‚¬ìš©í•œë‹¤. <code class="language-plaintext highlighter-rouge">acquire()</code>ëŠ” ìì›ì´ ì‚¬ìš©ê°€ëŠ¥í•œì§€ í™•ì¸í•˜ê³ , ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤ë©´ ì‚¬ìš©í•˜ê³  ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ ëŒ€ê¸°í•œë‹¤. <code class="language-plaintext highlighter-rouge">release()</code>ëŠ” ìì›ì„ ë‚´ë†“ê³ , ë‹¤ìŒ ìì›ì„ ì‹¤í–‰ì‹œí‚¨ë‹¤.</p>

<p>ìë°”ë¥¼ í†µí•´ ì„¸ë§ˆí¬ êµ¬ì¡°ë¥¼ ê°„ë‹¨íˆ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Semaphore</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">value</span><span class="o">;</span>      <span class="c1">// number of permits</span>
  <span class="nc">Semaphore</span><span class="o">(</span><span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>
  <span class="o">}</span>
  <span class="kt">void</span> <span class="nf">acquire</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">value</span><span class="o">--;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// add this process/thread to list</span>
      <span class="c1">// block</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="kt">void</span> <span class="nf">release</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">value</span><span class="o">++;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// remove a process P from list</span>
      <span class="c1">// wakeup P</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><img src="https://mblogthumb-phinf.pstatic.net/20140527_265/wndrlf2003_1401125270012DhChu_PNG/1.png?type=w2" alt="ì„¸ë§ˆí¬ ê°„ë‹¨í•œ ê·¸ë¦¼" class="center-text" /></p>

<p>ìœ„ ì½”ë“œì—ì„œ acquire() ëŠ” valueê°’ì„ ê°ì†Œì‹œí‚¤ê³  ë§Œì•½ <strong>valueê°’ì´ 0ë³´ë‹¤ ì‘ìœ¼ë©´(ê°€ìš©ìì›ì„ ëª¨ë‘ ì‚¬ìš©í•¨) ì´ë¯¸ í•´ë‹¹ ì„ê³„êµ¬ì—­ì— ì–´ëŠ í”„ë¡œì„¸ìŠ¤ê°€ ì¡´ì¬</strong>í•œë‹¤ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ í˜„ì¬ í”„ë¡œì„¸ìŠ¤ëŠ” ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ ë§‰ì•„ì•¼í•œë‹¤. ì´ë¥¼ listë¼ëŠ” ê¸°ë‹¤ë¦¬ëŠ” ì¤„ì— ì¶”ê°€í•œ ë’¤ blockì„ ê±¸ì–´ì¤€ë‹¤.(listëŠ” ì¼ë°˜ì ìœ¼ë¡œ íë¡œ ë˜ì–´ìˆë‹¤.)</p>

<p>release() ëŠ” valueê°’ì„ ì¦ê°€ì‹œí‚¤ê³ , ë§Œì•½ <strong>valueê°’ì´ 0ë³´ë‹¤ ê°™ê±°ë‚˜ ì‘ìœ¼ë©´ ì„ê³„êµ¬ì—­ì— ì§„ì…í•˜ë ¤ê³  ëŒ€ê¸°í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ listì— ë‚¨ì•„ìˆë‹¤ëŠ” ì˜ë¯¸</strong>ì´ë¯€ë¡œ ê·¸ ì¤‘ì—ì„œ í•˜ë‚˜ë¥¼ êº¼ë‚´ì–´ ì„ê³„êµ¬ì—­ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì–´ì•¼ í•œë‹¤.</p>

<p><img width="800" alt="image" src="https://user-images.githubusercontent.com/37871541/78147073-f8a45d00-746d-11ea-923c-9767bbb82cb5.png" class="center" /></p>

<p>ì„¸ë§ˆí¬ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ ë‚˜íƒ€ë‚´ë©´ ìœ„ì™€ ê°™ë‹¤. listëŠ” ì‹¤ì œë¡œ íë¡œ ë³¼ ìˆ˜ ìˆë‹¤. acquire()ì— ì˜í•´ blockë˜ëŠ” í”„ë¡œì„¸ìŠ¤ëŠ” ì„¸ë§ˆí¬ ë‚´ë¶€ì— ìˆëŠ” íì— ì‚½ì…ëœ í›„, ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ì„ê³„êµ¬ì—­ì„ ë‚˜ì˜¤ë©´ì„œ release()ë¥¼ í˜¸ì¶œí•˜ì—¬ <strong>ì„¸ë§ˆí¬ íì— ìˆëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ê¹¨ì›Œì•¼ í•œë‹¤.</strong>(ë‹¤ì‹œ ready queueë¡œ ë³´ë‚¸ë‹¤.)</p>

<p>ìœ„ì—ì„œ ì‚´í´ë³¸ ê²ƒì²˜ëŸ¼ ì„¸ë§ˆí¬ëŠ” ì¼ë°˜ì ìœ¼ë¡œ <strong>Mutual exclusion</strong>ì„ ìœ„í•´ ì‚¬ìš©ëœë‹¤.<br />
<a href="https://wansook0316.github.io/cs/os/2020/04/01/ìš´ì˜ì²´ì œ-ì •ë¦¬-08-í”„ë¡œì„¸ìŠ¤-ë™ê¸°í™”-1.html">ìš´ì˜ì²´ì œ ì •ë¦¬ 08: í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” &lt;1. ë°œìƒ ì´ìœ ì™€ ëª©ì &gt;</a></p>

<h3 id="bank-account-problemì€í–‰-ê³„ì¢Œ-ë¬¸ì œ-í•´ê²°">Bank Account Problem(ì€í–‰ ê³„ì¢Œ ë¬¸ì œ) í•´ê²°</h3>

<p>ì´ì „ ê¸€ì—ì„œ ë³´ì•˜ë˜ ì€í–‰ ê³„ì¢Œ ë¬¸ì œì— ì„¸ë§ˆí¬ë¥¼ ì ìš©í•´ë³´ì. ìœ„ì—ì„œ ì„ê³„êµ¬ì—­ì€ BankAccount í´ë˜ìŠ¤ ë‚´ë¶€ì˜ ì…ì¶œë ¥í•˜ëŠ” ë¶€ë¶„ì¸ ê²ƒì„ ë³´ì•˜ë‹¤. ì—¬ê¸°ì— ì„¸ë§ˆí¬ë¥¼ ì ìš©í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.concurrent.Semaphore</span><span class="o">;</span>  <span class="c1">// ì„¸ë§ˆí¬ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ íŒŒì¼ ê°€ì¥ ìœ„ì— ì¶”ê°€í•´ì•¼ í•œë‹¤.</span>

<span class="kd">class</span> <span class="nc">BankAccount</span> <span class="o">{</span>
	<span class="kt">int</span> <span class="n">balance</span><span class="o">;</span>

	<span class="nc">Semaphore</span> <span class="n">sem</span><span class="o">;</span>
	<span class="nc">BankAccount</span><span class="o">()</span> <span class="o">{</span>   <span class="c1">// BankAccount í´ë˜ìŠ¤ì˜ ìƒì„±ìê°€ í˜¸ì¶œë˜ë©´ ì„¸ë§ˆí¬ë¥¼ ë§Œë“ ë‹¤.</span>
		<span class="n">sem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Semaphore</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>  <span class="c1">// value ê°’ì„ 1ë¡œ ì´ˆê¸°í™”í•œë‹¤.</span>
	<span class="o">}</span>

	<span class="kt">void</span> <span class="nf">deposit</span><span class="o">(</span><span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">sem</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>   <span class="c1">// ì„ê³„êµ¬ì—­ì— ë“¤ì–´ê°€ê¸°ë¥¼ ìš”ì²­í•œë‹¤.</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
	    <span class="cm">/* ì„ê³„ êµ¬ì—­ */</span>
		<span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">+</span> <span class="n">amount</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"+"</span><span class="o">);</span>
		<span class="n">balance</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>

		<span class="n">sem</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>   <span class="c1">// ì„ê³„êµ¬ì—­ì—ì„œ ë‚˜ê°„ë‹¤.</span>
	<span class="o">}</span>
	<span class="kt">void</span> <span class="nf">withdraw</span><span class="o">(</span><span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">sem</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
	    <span class="cm">/* ì„ê³„ êµ¬ì—­ */</span>
		<span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">-</span> <span class="n">amount</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"-"</span><span class="o">);</span>
		<span class="n">balance</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>

		<span class="n">sem</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
	<span class="o">}</span>
	<span class="kt">int</span> <span class="nf">getBalance</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">balance</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>value ê°’ì€ ì„ê³„êµ¬ì—­ì— ëª‡ ê°œì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì ‘ê·¼í•  ê²ƒì¸ì§€ ì •í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤. ì§€ê¸ˆì€ ì„ê³„ êµ¬ì—­ì— í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë§Œ ì ‘ê·¼ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— 1 ë¡œ ì´ˆê¸°í™” í•œë‹¤. (ìœ„ ì½”ë“œë¥¼ ì œì™¸í•œ ë¶€ë¶„ì€ ë™ì¼í•˜ë‹¤.) ì´ ì½”ë“œë¥¼ ìˆ˜í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// +,- ì¶œë ¥ ìƒëµ</span>
<span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></div>

<p>ì •ìƒì ìœ¼ë¡œ ì”ì•¡ì´ 0ì›ì´ ë‚˜ì˜¨ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ ì½”ë“œëŠ” ì„ê³„êµ¬ì—­ì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ìœ¼ë¯€ë¡œ ëª‡ ë²ˆì„ ìˆ˜í–‰í•˜ì—¬ë„ ê°™ì€ ê²°ê³¼ê°’ì´ ì¶œë ¥ëœë‹¤.</p>

<h2 id="2-ordering">2. Ordering</h2>

<p>ì„¸ë§ˆí¬ëŠ” mutual exclusionë¿ ì•„ë‹ˆë¼ orderingì„ í•˜ê¸° ìœ„í•´ì„œë„ ì‚¬ìš©í•œë‹¤. ì¦‰, í”„ë¡œì„¸ìŠ¤ì˜ ì‹¤í–‰ ìˆœì„œë¥¼ ì›í•˜ëŠ” ìˆœì„œë¡œ ì„¤ì • í•  ìˆ˜ ìˆë‹¤.</p>

<p>ì˜ˆë¥¼ ë“¤ì–´, í”„ë¡œì„¸ìŠ¤ê°€ P1, P2 ë‘ ê°œê°€ ìˆë‹¤ê³  ê°€ì •í•˜ì. ì›í•˜ëŠ” ìˆœì„œëŠ” P1, P2 ìˆœìœ¼ë¡œ ì‹¤í–‰í•˜ê¸°ë¥¼ ì›í•œë‹¤. ê·¸ëŸ¬ë©´ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// ì´ˆê¸° semaphore ê°’ = 0
sem value = 0
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: center">P1</th>
      <th style="text-align: center">P2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Â </td>
      <td style="text-align: center">sem.acquire()</td>
    </tr>
    <tr>
      <td style="text-align: center">section 1</td>
      <td style="text-align: center">section 2</td>
    </tr>
    <tr>
      <td style="text-align: center">sem.release()</td>
      <td style="text-align: center">Â </td>
    </tr>
  </tbody>
</table>

<h3 id="p1ì´-ë¨¼ì €-ì‹¤í–‰ëœ-ê²½ìš°">P1ì´ ë¨¼ì € ì‹¤í–‰ëœ ê²½ìš°</h3>

<ol>
  <li>Section 1 ì´ì „ì— ì•„ë¬´ëŸ° ë™ì‘ì´ ì—†ìœ¼ë¯€ë¡œ ë°”ë¡œ ìˆ˜í–‰í•œë‹¤.</li>
  <li>sem.release() ë¥¼ ë§Œë‚˜ë©´ valueê°’ì„ 1 ì¦ê°€ì‹œí‚¤ê³ , ì„¸ë§ˆí¬ íì— ìˆëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ê¹¨ì›Œì£¼ëŠ”ë° í˜„ì¬ì—ëŠ” íì— í”„ë¡œì„¸ìŠ¤ê°€ ì—†ìœ¼ë¯€ë¡œ ì•„ë¬´ ë™ì‘ë„ í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>
  <li>P2ê°€ ì‹¤í–‰ëœë‹¤.</li>
  <li>P2ì˜ sem.acquire() ë¥¼ ë§Œë‚˜ë©´ í˜„ì¬ valueê°’ì€ 1ì´ê³  ì´ë¥¼ 1ê°ì†Œì‹œí‚¤ë©´ 0ì´ ëœë‹¤. value = 0ì´ë©´ blockì„ í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ë¬´ì‚¬íˆ Section 2ê°€ ìˆ˜í–‰ëœë‹¤.</li>
</ol>

<h3 id="p2ê°€-ë¨¼ì €-ì‹¤í–‰ëœ-ê²½ìš°">P2ê°€ ë¨¼ì € ì‹¤í–‰ëœ ê²½ìš°</h3>

<ol>
  <li>Section 2 ì´ì „ì— sem.acquire() ê°€ ìˆìœ¼ë¯€ë¡œ ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ”ë°, í˜„ì¬ valueê°’ì€ 0ì´ê³  ì´ë¥¼ 1 ê°ì†Œ ì‹œí‚¤ë©´ -1 ì´ ëœë‹¤. valueê°’ì´ ìŒìˆ˜ë©´ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ë¥¼ blockì‹œí‚¨ë‹¤.(ì„¸ë§ˆí¬ íì— ì‚½ì…í•œë‹¤.)</li>
  <li>P1ì´ ì‹¤í–‰ë˜ë©´ Section 1ì´ ë°”ë¡œ ìˆ˜í–‰ëœë‹¤.</li>
  <li>sem.release() ë¥¼ ë§Œë‚˜ë©´ valueê°’ì„ 1 ì¦ê°€ì‹œí‚¤ê³ , ì„¸ë§ˆí¬ íì— ìˆëŠ” P2 í”„ë¡œì„¸ìŠ¤ë¥¼ ê¹¨ì›Œì¤€ë‹¤.(í˜„ì¬ value = 0)</li>
  <li>P2ì˜ Section 2ê°€ ìˆ˜í–‰ëœë‹¤.</li>
</ol>

<p>ìœ„ì—ì„œ ë‘ ê°€ì§€ ê²½ìš°ë¥¼ ì‚´í´ë³´ì•˜ë“¯ì´, P1, P2 ë‘˜ ì¤‘ ì–´ëŠ ê²ƒì„ ë¨¼ì € ì‹¤í–‰í•˜ì—¬ë„ ê²°ê³¼ì ìœ¼ë¡œ <strong>P1 -&gt; P2 ìˆœì„œ</strong>ë¡œ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>

<h3 id="ì…ê¸ˆ-ì¶œê¸ˆ-ìˆœì„œë¡œ-ì€í–‰ê³„ì¢Œ-ë¬¸ì œ-í•´ê²°í•˜ê¸°">ì…ê¸ˆ ì¶œê¸ˆ ìˆœì„œë¡œ ì€í–‰ê³„ì¢Œ ë¬¸ì œ í•´ê²°í•˜ê¸°</h3>

<p>ìœ„ì—ì„œ ê³„ì† ì‚´í´ë´¤ë˜ ì€í–‰ê³„ì¢Œ ë¬¸ì œì—ì„œ orderingì„ ì ìš©í•´ë³´ì. í”„ë¡œì„¸ìŠ¤ì˜ ì‹¤í–‰ ìˆœì„œëŠ” ë°˜ë“œì‹œ ì…ê¸ˆ, ì¶œê¸ˆ ìˆœì„œë¡œ ìˆ˜í–‰í•´ì•¼í•œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">BankAccount</span> <span class="o">{</span>
	<span class="kt">int</span> <span class="n">balance</span><span class="o">;</span>

	<span class="nc">Semaphore</span> <span class="n">sem</span><span class="o">,</span> <span class="n">semOrder</span><span class="o">;</span>
	<span class="nc">BankAccount</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">sem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Semaphore</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
		<span class="n">semOrder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Semaphore</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>   <span class="c1">// Ordeingì„ ìœ„í•œ ì„¸ë§ˆí¬</span>
	<span class="o">}</span>

	<span class="kt">void</span> <span class="nf">deposit</span><span class="o">(</span><span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">sem</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		<span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">+</span> <span class="n">amount</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"+"</span><span class="o">);</span>
		<span class="n">balance</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
		<span class="n">sem</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
		<span class="n">semOrder</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>   <span class="c1">// blockëœ ì¶œê¸ˆ í”„ë¡œì„¸ìŠ¤ê°€ ìˆë‹¤ë©´ ê¹¨ì›Œì¤€ë‹¤.</span>
	<span class="o">}</span>
	<span class="kt">void</span> <span class="nf">withdraw</span><span class="o">(</span><span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">semOrder</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>   <span class="c1">// ì¶œê¸ˆì„ ë¨¼ì €í•˜ë ¤ê³  í•˜ë©´ blockí•œë‹¤.</span>
			<span class="n">sem</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
		<span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">-</span> <span class="n">amount</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"-"</span><span class="o">);</span>
		<span class="n">balance</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
		<span class="n">sem</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
	<span class="o">}</span>
	<span class="kt">int</span> <span class="nf">getBalance</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">balance</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ìœ„ì²˜ëŸ¼ ì½”ë“œë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤. Orderingì„ ìœ„í•œ semOrder ì„¸ë§ˆí¬ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³ , ì¶œê¸ˆí•˜ëŠ” ë™ì‘ ì•ì— <code class="language-plaintext highlighter-rouge">acquire()</code>, ì…ê¸ˆí•˜ëŠ” ë™ì‘ ë’¤ì— <code class="language-plaintext highlighter-rouge">release()</code> ë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+++++++++++++++++++++++++------------+++++-----++++++++++++++++++++++++++++++++
+++++++++++++++++++++++++++++++++++++------------------------------------------
----------------------------------------
balance = 0
</code></pre></div></div>

<p>ì‹¤í–‰ ê²°ê³¼ëŠ” ìœ„ì™€ ê°™ë‹¤. <strong>+(ì…ê¸ˆ)ê°€ ë§¨ ì•ì—ì„œ ì‹¤í–‰</strong>í•œ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.(ì…ê¸ˆ, ì¶œê¸ˆ íšŸìˆ˜ëŠ” 100ë²ˆìœ¼ë¡œ ì¤„ì˜€ë‹¤.)</p>

<p>ë§Œì•½, ì…ê¸ˆ, ì¶œê¸ˆ, ì…ê¸ˆ, ì¶œê¸ˆ, â€¦ êµëŒ€ë¡œ ì¶œë ¥í•˜ë„ë¡ í•˜ë ¤ë©´ ì„¸ë§ˆí¬ë¥¼ ë‘ ê°œ ì‚¬ìš©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">deposit</span><span class="o">(</span><span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">try</span> <span class="o">{</span>
		<span class="n">sem</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
		<span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">+</span> <span class="n">amount</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"+"</span><span class="o">);</span>
		<span class="n">balance</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
		<span class="n">sem</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
		<span class="n">semWithraw</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
		<span class="n">semDeposit</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>   <span class="c1">// ì…ê¸ˆí›„ì—ëŠ” ë°˜ë“œì‹œ ì¶œê¸ˆì„ í•´ì•¼ í•˜ë¯€ë¡œ ìì‹ ì„ blockí•œë‹¤.</span>
	<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
<span class="o">}</span>
<span class="kt">void</span> <span class="nf">withdraw</span><span class="o">(</span><span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">try</span> <span class="o">{</span>
		<span class="n">semWithraw</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>  <span class="c1">// ì…ê¸ˆë³´ë‹¤ ë¨¼ì € ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ë§‰ëŠ”ë‹¤.</span>
		<span class="n">sem</span><span class="o">.</span><span class="na">acquire</span><span class="o">();</span>
	<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
	<span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">-</span> <span class="n">amount</span><span class="o">;</span>
	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"-"</span><span class="o">);</span>
	<span class="n">balance</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
	<span class="n">sem</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
	<span class="n">semDeposit</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>  <span class="c1">// ì¶œê¸ˆ ìˆ˜í–‰ì´ ì™„ë£Œë˜ë©´ blockë˜ì—ˆë˜ ì…ê¸ˆ í”„ë¡œì„¸ìŠ¤ë¥¼ ê¹¨ì›Œì¤€ë‹¤.</span>
<span class="o">}</span>
<span class="kt">int</span> <span class="nf">getBalance</span><span class="o">()</span> <span class="o">{</span>
	<span class="k">return</span> <span class="n">balance</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-
balance = 0
</code></pre></div></div>

<h3 id="reference">Reference</h3>

<p><a href="http://www.kocw.net/home/search/kemView.do?kemId=978503">KOCW ì–‘í¬ì¬ êµìˆ˜ë‹˜ - ìš´ì˜ì²´ì œ</a><br />
<a href="https://m.blog.naver.com/PostList.nhn?blogId=hjyang0&amp;categoryNo=13">ì–‘í¬ì¬ êµìˆ˜ë‹˜ ë¸”ë¡œê·¸(ì‹œí—˜ ê¸°ì¶œ ë¬¸ì œ)</a><br />
<a href="https://velog.io/@codemcd/">codemcd ë‹˜ì˜ ì •ë¦¬ê¸€</a><br />
<a href="https://m.blog.naver.com/wndrlf2003/220011819891">ì„¸ë§ˆí¬ ì‚¬ì§„</a><br />
Operating System Concepts, 9th Edition - Abraham Silberschatz</p>

  </section>
  
<footer>
  <div class="tags">
    
    <a class="tag" href="/tags#OS">#OS</a>
    
    <a class="tag" href="/tags#Synchronization">#Synchronization</a>
    
    <a class="tag" href="/tags#Semaphore">#Semaphore</a>
    
  </div>
</footer>


</article>

<!-- Post navigation -->
<div id="post-nav">
  
  
    
    
    
    
    
    
    
    

    
    
     
      
      
      
      
      
      
      
      
      
          
          
        
      
      
      
      
      
      
      
      
      
      
          
          
        
      
      
      
      
      
      
      
      
      
      
          
          
        
      
      
      
      
      
      
      
      
          
          
        
      
      
      
      
      
      
      
      
          
          
        
      
      
          
          
        
      
      
      
      
      
      
      
      
          
          
        
      
      
      
      
      
      
          
          
            <div id="previous-post" class="post-nav-post" onclick="location.href='/cs/os/2020/04/01/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-08-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EB%8F%99%EA%B8%B0%ED%99%94-1.html';">
                <p>PREVIOUS SERIES</p>
                <a href="/cs/os/2020/04/01/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-08-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EB%8F%99%EA%B8%B0%ED%99%94-1.html">
                  08: í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” Part 1
                </a>
            </div>
          
        
      
      
      
      
          
          
        
      
      
      
      
          
          
            <div id="next-post" class="post-nav-post" onclick="location.href='/cs/os/2020/04/05/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-10-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EB%8F%99%EA%B8%B0%ED%99%94-3.html';">
              <p>NEXT SERIES</p>
              <a href="/cs/os/2020/04/05/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%A0%95%EB%A6%AC-10-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EB%8F%99%EA%B8%B0%ED%99%94-3.html">
                10: í”„ë¡œì„¸ìŠ¤ ë™ê¸°í™” Part 3
              </a>
            </div>
          
        
      
      
          
          
        
      
      
          
          
        
      
      
          
          
        
      
      
          
          
        
      
      
          
          
        
      
      
          
          
        
      
      
          
          
        
      
      
          
          
        
      
      
          
          
        
      
      
          
          
        
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    
  

  
</div>


<!-- Disqus -->

<div class="comments">
  <div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_shortname = 'wansook0316';
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view comments.</noscript>

</div>


<!-- Post navigation -->




    </div>
    
    
<script src="/assets/js/katex_init.js"></script>



<footer class="site-footer">
	<p class="text">ì´ì „ ë¸”ë¡œê·¸ <a href="https://egg-money.tistory.com">ì™„ìˆ™ì˜ ì—ê·¸ë¨¸ë‹ˆ</a>
</p>
</footer>


  </body>
</html>
